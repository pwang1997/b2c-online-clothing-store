version: '3.9'

services:

  frontend:
    container_name: frontend
    restart: always
    build: 
      context: ./view
      dockerfile: Dockerfile
    # volumes:
    #   - ./view/:/app
    #   - /app/node_modules
    ports:
      - "3000:80"
    # command: yarn start --network-timeout 1000000

  # oauth:
  #   container_name: oauth-service
  #   build:
  #     context: ./oauth
  #     dockerfile: Dockerfile
  #   volumes:
  #     - ./oauth:/oauth
  #     - /oauth/node_modules
  #   ports:
  #     - "3001:3001"

  payment:
    container_name: payment-service
    build:
      context: ./payment
      dockerfile: Dockerfile
    volumes:
      - ./payment:/payment
      - /payment/node_modules
    ports:
      - "3002:5000"

  redis_database:
    container_name: redis
    image: redis:alpine3.16
    ports:
      - 6379:6379

  redis-server-service:
    container_name: redis-server-service
    build: ./redis-server
    ports:
      - 4000:4000
    depends_on:
      - redis_database
    environment:
      REDIS_HOST: redis_database
      REDIS_PORT: 6379